名称
    parsrj.sh - JSONテキストデータをJSONPath-value形式データに変換

書式
    parsrj.sh [options] [JSON_file]

解説
    parsrj.shコマンドは、階層構造を持つJSONテキストデータを、値が格納さ
    れているパス(JSONPath)と、そこに格納されている値(value)、という2列
    で1行(デリミタは半角空白1文字)を成すテキストデータに変換します。JSON
    テキストデータファイルは引数<JSON_file>として与えるものとし、もしそ
    れが省略されるか`-'だった場合には、標準出力から受け取ります。

    このテキストデータ形式は、JSONPath-valueと呼ばれ、ユニケージにおけ
    るネーム形式(5)の派生フォーマットです。派生物であるため、変換後のデ
    ータはnameread(1)等のTukubaiコマンドでも扱えるなど、UNIXコマンドに
    よるJSONデータのスクレイピングに役立ちます。

    なお、JSONPathとは、JSONにおけるデータの階層を指定するための構文で
    あり、XMLにおけるデータ階層指定構文であるXPathに基づいて考案されま
    した。詳しい文法については次のページを参照してください。
    http://goessner.net/articles/JsonPath/

    オプションは以下の通りです:

    -t      JSONの値が持っている4つの型(type)が、変換後でも区別できるよ
            うにして出力します。そのために、文字列型の値はダブルクォー
            テーションで括られた状態で出力されます。
            このオプションは、後で逆変換(JSONPath-value形式からJSON形式)
            をする必要がある場合に必要です。

    -e      JSONPath文字列として本来あってはならない記号(半角空白やJSON-
            Pathの各種記述子)が含まれる場合に、それらの文字をエスケープ
            しながら出力します。このオプションは、変換速度を低下させる
            ため、必要がない限り使うべきではありません。
            確かにJSONはJSONPathを想定して設計されていないため、そのよ
            うなJSONデータを作成することはできますが、実在するJSONデー
            タでエスケープが必要なデータはほとんどありませんし、あなた
            も作成すべきではありません。

    --xpath JSONPathの代わりにXPath形式で出力します。XMLデータをスクレ
            イピングできる既存システムと連携させる必要がある場合には便
            利です。

補足
    JSONにマルチバイト文字列が格納される場合には、`\u5b57'のようにユニ
    コードエスケープされることがありますが、このコマンドはそれらの復元
    を担当しません。マルチバイト文字を使う言語圏のAPIからJSONデータを受
    け取って利用する場合には、unescj.shコマンドの併用が必要になるかもし
    れません。

関連項目
    unescj.sh, makrj.sh, parsrx.sh
